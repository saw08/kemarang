(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{3017:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tambah-ruang",function(){return s(1250)}])},1250:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var l=s(5893),t=s(7294);function n(e){let{props:a}=e,s=a.namaruang.split(" ").join("");return a.foto,(0,l.jsx)("div",{className:"col-lg-4",children:(0,l.jsxs)("div",{style:{borderStyle:"solid",borderColor:"white",borderRadius:"0.3rem"},children:[(0,l.jsx)("div",{className:"gallery-item",children:(0,l.jsxs)("div",{id:"".concat(s),className:"carousel slide","data-bs-ride":"carousel",children:[(0,l.jsx)("div",{className:"carousel-inner",children:a.foto1.map((e,a)=>(0,l.jsx)(l.Fragment,{children:0==a?(0,l.jsx)("div",{className:"carousel-item active",children:(0,l.jsx)("img",{src:"".concat(e),className:"d-block w-100",alt:"..."})}):(0,l.jsx)("div",{className:"carousel-item",children:(0,l.jsx)("img",{src:"".concat(e),className:"d-block w-100",alt:"..."})})}))}),(0,l.jsxs)("button",{className:"carousel-control-prev",type:"button","data-bs-target":"#".concat(s),"data-bs-slide":"prev",children:[(0,l.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),(0,l.jsx)("span",{className:"visually-hidden",children:"Previous"})]}),(0,l.jsxs)("button",{className:"carousel-control-next",type:"button","data-bs-target":"#".concat(s),"data-bs-slide":"next",children:[(0,l.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),(0,l.jsx)("span",{className:"visually-hidden",children:"Next"})]})]})}),(0,l.jsxs)("div",{className:"box p-3",children:[(0,l.jsx)("span",{children:a.i}),(0,l.jsx)("h5",{children:a.namaruang}),(0,l.jsxs)("h6",{children:["kapasitas \xa0",a.kapasitas,"\xa0orang"]}),(0,l.jsxs)("h6",{children:["kapasitas\xa0",a.kapasitas,"\xa0orang"]}),(0,l.jsx)("p",{children:a.deskripsi})]})]})})}var i=s(9734);function r(){let e=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return fetch(...a).then(e=>e.json())},{data:a,error:s}=(0,i.ZP)("/api/db_ruangan",e,{refreshInterval:1e3});if(!a)return(0,l.jsx)("div",{className:"spinner"});if(s)return(0,l.jsx)("div",{children:"Something went wrong"});let t=a.message;return(0,l.jsx)("div",{className:"bg-dark",children:(0,l.jsx)("section",{id:"book-a-table",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("div",{className:"section-title",children:(0,l.jsx)("p",{style:{fontSize:"22px"},children:"Ruangan"})}),(0,l.jsx)("div",{className:"row text-white col-lg-12 ",children:0===t.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:t.map((e,a)=>(0,l.jsx)(n,{props:e}))})})]})})})}function c(){let[e,a]=(0,t.useState)(""),[s,n]=(0,t.useState)(""),[i,c]=(0,t.useState)(""),[o,d]=(0,t.useState)(""),[m,u]=(0,t.useState)([]),[h,x]=(0,t.useState)([]),[g,j]=(0,t.useState)([]),[p,v]=(0,t.useState)(""),[N,f]=(0,t.useState)(""),[b,w]=(0,t.useState)(!1),k=()=>{a(""),c(""),n(""),d(""),u([]),w(!1)},y=async l=>{l.preventDefault(),w(!0);let t=new FormData,r=[];for(let c=0;c<h.length;c++){await t.append("file",h[c]),t.append("upload_preset","kemarang-images");let m=await fetch("https://api.cloudinary.com/v1_1/dlxni4x0g/image/upload",{method:"POST",body:t}).then(e=>e.json());await console.log(m),await console.log("Secure URL"),await console.log(m.secure_url),r.push(m.secure_url)}if(v(""),f(""),k(),alert("Penambahan Data Sukses"),!o||!e||!s||!r)return v("isi semua data");let x=await (await fetch("/api/db_ruangan",{method:"POST",body:JSON.stringify({namaruang:e,kategori:i,kapasitas:s,deskripsi:o,foto1:r})})).json();return x.success?(a(""),n(""),d(""),u(""),j(null),f(x.message)):v(x.message)},S=e=>{if(e.target.files&&e.target.files[0]){document.getElementById("image");let a=e.target.files[0];u(e=>[...e,a.name]),x(e=>[...e,a]),j(e=>[...e,URL.createObjectURL(a)])}},_=e=>{var a=m.indexOf(e);a>=0&&(0===m.length?(u([]),x([]),j([])):(u(e=>[...e.slice(0,a),...e.slice(a+1)]),x(e=>[...e.slice(0,a),...e.slice(a+1)]),j(e=>[...e.slice(0,a),...e.slice(a+1)])))};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("section",{id:"events",className:"events",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("div",{className:"section-title",children:(0,l.jsx)("h2",{children:"Tambah ruangan"})}),(0,l.jsx)("form",{onSubmit:y,children:(0,l.jsxs)("div",{className:" col-lg-12",children:[(0,l.jsx)("div",{className:"mt-2 col-lg-6 col-md-10",children:0===m.length?(0,l.jsx)("h4",{children:"Daftar Foto"}):(0,l.jsx)(l.Fragment,{children:m.map((e,a)=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"cols-2 mt-3 mb-3 row row-cols-2",children:[(0,l.jsx)("div",{className:"col-10 col-md-10",children:(0,l.jsx)("img",{id:"image",className:"img-fluid d-block border border-dark",width:300,height:300,src:g[a]})}),(0,l.jsx)("div",{className:"col-10 col-md-2",children:(0,l.jsx)("button",{className:"form-control",onClick:()=>_(e),children:(0,l.jsx)("i",{className:"fa fa-trash"})})})]})}))})}),(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 form-group mt-3",children:[(0,l.jsx)("label",{style:{color:"white"},children:"Foto ruangan (dapat di isi 3 foto)"}),(0,l.jsx)("input",{type:"file",className:"form-control",name:"myImage",onChange:S})]}),(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 form-group mt-3",children:[(0,l.jsx)("label",{style:{color:"white"},children:"Kategori"}),(0,l.jsxs)("select",{className:"form-control form-select",onChange:e=>c(e.target.value),required:!0,children:[(0,l.jsx)("option",{readonly:!0,children:"--pilih kategori--"}),(0,l.jsx)("option",{value:"ruangan",children:"Ruangan"}),(0,l.jsx)("option",{value:"pondok",children:"Pondok"})]})]}),(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 mt-3 form-group",children:[(0,l.jsx)("label",{style:{color:"white"},htmlFor:"validatedCustomFile",children:"Nama ruang "}),(0,l.jsx)("input",{type:"text",id:"validatedCustomFile",name:"myImage",className:"form-control",placeholder:"Nama ruangan",onChange:e=>a(e.target.value),value:e}),(0,l.jsx)("div",{className:"validate"})]}),(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 mt-3 form-group",children:[(0,l.jsx)("label",{style:{color:"white"},children:"Kapasitas"}),(0,l.jsx)("input",{type:"number",name:"kapasitas",className:"form-control",placeholder:"kapasitas",onChange:e=>n(e.target.value),value:s}),(0,l.jsx)("div",{className:"validate"})]}),(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 mt-3 form-group",children:[(0,l.jsx)("label",{style:{color:"white"},children:"Deskripsi"}),(0,l.jsx)("input",{type:"text",name:"deskripsi",className:"form-control",placeholder:"deskripsi",onChange:e=>d(e.target.value),value:o}),(0,l.jsx)("div",{className:"validate"})]}),(0,l.jsx)("div",{className:"text-center col-lg-6 col-md-10 form-group mt-3 mt-5",children:(0,l.jsx)("button",{className:"book-a-table-btn",type:"submit",disabled:!1!==b,children:"Tambah Ruangan"})})]})})]})}),(0,l.jsx)(r,{})]})}}},function(e){e.O(0,[734,774,888,179],function(){return e(e.s=3017)}),_N_E=e.O()}]);