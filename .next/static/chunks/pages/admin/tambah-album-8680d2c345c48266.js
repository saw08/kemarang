(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{9323:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/tambah-album",function(){return s(3181)}])},3181:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return c}});var l=s(5893);s(1664);var t=s(7294),n=s(9734);function i(e){let{props:a}=e;return a.foto,(0,l.jsx)("div",{className:"col-lg-3 col-md-4",children:(0,l.jsx)("div",{className:"gallery-item",children:(0,l.jsxs)("a",{href:"".concat(a.foto),className:"gallery-lightbox","data-gall":"gallery-item",children:[(0,l.jsx)("img",{src:a.foto,alt:!0,className:"img-fluid"}),(0,l.jsx)("label",{children:" ".concat(a.deskripsi)})]})})})}function r(){let e=function(){for(var e=arguments.length,a=Array(e),s=0;s<e;s++)a[s]=arguments[s];return fetch(...a).then(e=>e.json())},{data:a,error:s}=(0,n.ZP)("/api/db_album",e,{refreshInterval:1e3});if(!a)return(0,l.jsx)("div",{className:"spinner"});if(s)return(0,l.jsx)("div",{children:"Something went wrong"});let t=a.message;return(0,l.jsxs)("section",{id:"gallery",className:"gallery",children:[(0,l.jsx)("div",{className:"container","data-aos":"fade-up",children:(0,l.jsx)("div",{className:"section-title",children:(0,l.jsx)("h2",{children:"Gallery Warung kemarang"})})}),(0,l.jsx)("div",{className:"container-fluid","data-aos":"fade-up","data-aos-delay":100,children:(0,l.jsx)("div",{className:"row col-lg-12",children:0===t.length?(0,l.jsx)(l.Fragment,{}):(0,l.jsx)(l.Fragment,{children:t.map((e,a)=>(0,l.jsx)(i,{props:e}))})})})]})}var c=function(){let[e,a]=(0,t.useState)(""),[s,n]=(0,t.useState)(""),[i,c]=(0,t.useState)(null),[o,d]=(0,t.useState)(null),[m,u]=(0,t.useState)(""),[h,g]=(0,t.useState)(""),[f,x]=(0,t.useState)(!1),j=()=>{a(""),n(""),x(!1)},p=async s=>{s.preventDefault(),x(!0);let l=new FormData;l.append("file",i),l.append("upload_preset","kemarang-images");let t=await fetch("https://api.cloudinary.com/v1_1/dlxni4x0g/image/upload",{method:"POST",body:l}).then(e=>e.json()),r=t.secure_url;if(x(!0),u(""),g(""),j(),alert("Penambahan Data Sukses"),!e||!r)return u("All fields are required");let c=await (await fetch("/api/db_album",{method:"POST",body:JSON.stringify({deskripsi:e,foto:r})})).json();return c.success?(a(""),n(""),d(null),g(c.message)):(console.log(c.message),u(c.message))},v=e=>{if(e.target.files&&e.target.files[0]){let a=e.target.files[0];n(a.name),c(a),d(URL.createObjectURL(a))}};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("section",{id:"events",className:"events",children:(0,l.jsxs)("div",{className:"container",children:[(0,l.jsx)("div",{className:"section-title",children:(0,l.jsx)("h2",{children:"Reservation"})}),(0,l.jsx)("form",{onSubmit:p,children:(0,l.jsxs)("div",{className:"row col-lg-12",children:[(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 form-group mt-3",children:[(0,l.jsx)("div",{className:"col-6 ",children:(0,l.jsx)("img",{src:o,className:"img img-fluid",style:{width:"30",height:"20"}})}),(0,l.jsx)("label",{style:{color:"white"},children:"Gambar"}),(0,l.jsx)("input",{type:"file",className:"form-control",name:"myImage",onChange:v})]}),(0,l.jsxs)("div",{className:"col-lg-6 col-md-10 mt-3 form-group",children:[(0,l.jsx)("label",{style:{color:"white"},children:"Deskripsi album "}),(0,l.jsx)("input",{type:"text",name:"deskripsi",className:"form-control",placeholder:"deskripsi",onChange:e=>a(e.target.value),value:e}),(0,l.jsx)("div",{className:"validate"})]}),(0,l.jsx)("div",{className:"text-center col-lg-10 col-md-10 form-group mt-3 mt-5",children:(0,l.jsx)("button",{className:"book-a-table-btn",type:"submit",disabled:!1!==f,children:"Tambah Ruangan"})})]})})]})}),(0,l.jsx)(r,{})]})}}},function(e){e.O(0,[299,774,888,179],function(){return e(e.s=9323)}),_N_E=e.O()}]);